(this.webpackJsonplive_coding=this.webpackJsonplive_coding||[]).push([[0],{137:function(e,t,n){e.exports={Chat:"Chat_Chat__bFHYn",Messages:"Chat_Messages__1pTSF",Input:"Chat_Input__1ctf5"}},209:function(e,t,n){e.exports={FileManager:"FileManager_FileManager__1dVwd"}},210:function(e,t,n){e.exports={ChatMessage:"ChatMessage_ChatMessage__k57rQ",ChatMessage_Date:"ChatMessage_ChatMessage_Date__2w_f9"}},212:function(e,t,n){e.exports={Notice:"NotificationPanel_Notice__25aD5",Notice_Wrapper:"NotificationPanel_Notice_Wrapper__hy2nl"}},213:function(e,t,n){e.exports={ClosedNotice_Text:"ClosedNotice_ClosedNotice_Text__3b3JK"}},214:function(e,t,n){e.exports={Notice:"ClosedNotificationPanel_Notice__17fAd",Notice_Wrapper:"ClosedNotificationPanel_Notice_Wrapper__2UMAr"}},278:function(e,t,n){e.exports={WorkSpaceItem:"WorkSapceItem_WorkSpaceItem__3kt83",WorkSpaceItem_Resizer:"WorkSapceItem_WorkSpaceItem_Resizer__2hhhU"}},279:function(e,t,n){e.exports={List_item:"ContextMenu_List_item__1KZa1",ContextMenuPoint:"ContextMenu_ContextMenuPoint__3ywRb"}},290:function(e,t,n){e.exports={WorkSpace:"WorkSpace_WorkSpace__1F33P",WorkSpace__wrapper_vertical:"WorkSpace_WorkSpace__wrapper_vertical__1JJDr",Resizable:"WorkSpace_Resizable__39BF4"}},308:function(e,t,n){},33:function(e,t,n){e.exports={Dark:"App_Dark__1ha7r",DarkSecond:"App_DarkSecond__1Mr9f",HoverText:"App_HoverText__1rEzK"}},413:function(e,t,n){},518:function(e,t,n){},542:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(31),i=n.n(o),r=(n(308),n(7)),s=n(552),l=n(4),d=n(278),u=n.n(d),j=n(2),b=a.a.createRef(),h=function(e){var t=e.children,n=e.size,a=void 0===n?{width:"100%",height:"100%"}:n;return Object(c.useEffect)((function(){var e;(null===(e=b.current)||void 0===e?void 0:e.offsetWidth)||0}),[]),Object(j.jsx)("div",{ref:b,className:u.a.WorkSpaceItem,style:Object(l.a)({},a),children:t})},f=n(171),m={isNoticeAddWindowOpened:!1,noticePos:{startColumn:0,startLineNumber:0,endColumn:0,endLineNumber:0},lineRange:{from:0,to:0},scrollInfo:{left:0,top:0,width:0,height:0,clientWidth:0,clientHeight:0},isSrcollEventActive:!1,fileManagerOpenedFile:{content:""},decorations:[],placement:"topLeft",username:"",url:window.location.pathname.split("/")[1]},p={context:m,setContext:function(){}},O=Object(c.createContext)(p),x=function(){return Object(c.useContext)(O)},g=O,v=n(18),_=n(549),y=n(299),C=n(548),S=n(279),w=n.n(S),N=n(547),k=N.a.Text,T=function(e){var t=e.children,n=e.title,c=void 0===n?"Context menu":n,a=e.placement,o=void 0===a?"rightBottom":a,i=e.trigger,r=void 0===i?"contextMenu":i,s=e.visible,l=void 0!==s&&s,d=e.data,u=e.action,b=e.fileItem,h=e.onVisibleChange;return Object(j.jsx)(y.a,{placement:o,defaultVisible:l,onVisibleChange:h,content:Object(j.jsx)(C.b,{size:"small",dataSource:d,renderItem:function(e){return Object(j.jsx)(C.b.Item,{className:w.a.List_item,style:e.last?{}:{border:"none"},children:Object(j.jsx)("div",{onClick:function(t){e.disabled||u[e.id](t,b)},children:Object(j.jsx)(k,{disabled:e.disabled,children:e.el})},e.id)})}}),title:c,trigger:r,children:t})},I=n(209),L=n.n(I),M=n(33),z=n.n(M),P=n(302),W=n(303),F=n(181),A=n(300),D=n(183),E=n(287),R=_.a.DirectoryTree,B=function e(t){Object(v.a)(this,e),this.title=void 0,this.key=void 0,this.isLeaf=void 0,this.children=void 0,this.icon=void 0,this.key=t.key,this.isLeaf=t.isLeaf,this.children=t.children,this.icon=t.icon,this.title=Object(j.jsx)(T,{data:[{el:"Open",disabled:!1,last:!0,id:0},{el:"Cut",disabled:!U(),last:!1,id:1},{el:"Copy",disabled:!U(),last:!0,id:2},{el:"Rename",disabled:!U(),last:!1,id:3},{el:"Delete",disabled:!U(),last:!0,id:4}],action:[H,V,K,J,q],fileItem:this,children:t.title})};function U(){return"streamer"===Q}function H(e,t){console.log(t)}function V(e){}function K(e){}function J(e){}function q(e){}var G,Y,Q,Z,X,$=function(e){var t=e.data,n=e.setExpanded,a=e.expanded,o=Object(c.useState)(m.fileManagerOpenedFile),i=Object(r.a)(o,2),s=(i[0],i[1]);Object(c.useEffect)((function(){Xt.on("notice_open_file",(function(e){l(e.path)}))}),[]);var l=function(e){var t=b(e);t&&(m.fileManagerOpenedFile=t,Xt.emit("open_file",t),s(t))},d=function e(t){var n=[];return t.forEach((function(t){t.isDirectory?n=n.concat(e(t.children)):n.push(t)})),n}(t),u=function(e,t){if(t)return function(e){return e.expanded?Object(j.jsx)(P.a,{}):Object(j.jsx)(W.a,{})};switch(e){case".html":return Object(j.jsx)(D.b,{});case".css":return Object(j.jsx)(D.a,{});case".js":return Object(j.jsx)(D.c,{});case".txt":return Object(j.jsx)(E.a,{});default:return Object(j.jsx)(F.a,{})}},b=function(e){return d.filter((function(t){return t.path===e}))[0]};return Object(j.jsx)("div",{className:"".concat(L.a.FileManager," ").concat(z.a.Dark),children:Object(j.jsx)(R,{className:L.a.Tree,switcherIcon:Object(j.jsx)(A.a,{}),showIcon:!0,blockNode:!0,defaultExpandedKeys:a,treeData:function e(t){var n=[];return t.forEach((function(t){var c=t.ext||"",a=new B({title:t.name+c,key:t.path,isLeaf:!t.isDirectory,icon:u(c,t.isDirectory)});t.isDirectory&&(a.children=e(t.children)),n.push(a)})),n}(t),onSelect:function(e,t){t.node.isLeaf&&l(e[0].toString())},onExpand:function(e){var t=e.map((function(e){return e.toString()}));n(t)},onRightClick:function(e){},defaultSelectedKeys:[m.fileManagerOpenedFile.path]})})},ee=n(40),te=n.n(ee),ne=n(298),ce=function(e){var t=e.message,n=e.description,c=e.type,a=e.placement,o=void 0===a?"bottomLeft":a;ne.a[c]({message:t,description:n,placement:o})},ae=function(){var e=x(),t=(e.context,e.setContext,Object(c.useState)("")),n=Object(r.a)(t,2),a=n[0],o=n[1],i=Object(c.useRef)(),s=Object(c.useRef)();function l(e){if(Y){var t=Y.getModel();t&&(G.editor.setModelLanguage(t,function(e){switch(e){case".js":return"javascript";case".css":return"text/css";case".html":return"text/html";default:return""}}(e.ext)),o(function(e){return"object"===typeof e.content?"":e.content}(e)))}}Object(c.useEffect)((function(){l(m.fileManagerOpenedFile),Xt.on("open_file",(function(e){l(e)})),Xt.on("editor_update",(function(e){o(e.value)}))}),[]);return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(f.a,{className:"CodeMirror_custom",defaultLanguage:"javascript",defaultValue:"",theme:"vs-dark",value:a,onChange:function(e,t){var n,c={value:e,file:m.fileManagerOpenedFile.path};o(e),null===(n=Z.current)||void 0===n||n.emit("editor_data",c),Xt.emit("editor_update_self",c)},onMount:function(e,t){i.current=e,s.current=t,G=t,Y=e,e.addAction({id:"addNotice",label:"Add Notice",contextMenuGroupId:"2_modification",contextMenuOrder:0,run:function(e){var t=e.getSelection();null!==t&&(t.endLineNumber-t.startLineNumber!==0?(m.noticePos=t,m.isNoticeAddWindowOpened=!0,Xt.emit("open_notice_add")):ne.a.info({message:"Code fragment cannot be empty!",description:"Try to select some code fragment and add notice again!"}))}}),"streamer"===Q&&e.addAction({id:"saveAaction",label:"Save Current File",contextMenuGroupId:"9_cutcopypaste",contextMenuOrder:0,keybindings:[t.KeyMod.CtrlCmd|t.KeyCode.KEY_S],run:function(e){te.a.post($t+m.url+"/savefile",{filePath:m.fileManagerOpenedFile.path,content:e.getValue()}).then((function(){Xt.emit("output_reload")})).catch((function(e){ce({message:"Save file error!",description:"Unexpected error saving file!\n"+e.message,type:"error"})}))}}),e.updateOptions({roundedSelection:!0,scrollBeyondLastLine:!1,smoothScrolling:!0,readOnly:"streamer"!=Q}),t.editor.defineTheme("vs-dark-custom",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.selectionBackground":"#e6e6e625","editor.inactiveSelectionBackground":"#e6e6e615"}}),t.editor.setTheme("vs-dark-custom"),e.onDidScrollChange((function(e){m.isSrcollEventActive&&Xt.emit("notice_will_scroll",e)}))}})})},oe=n(13),ie=n(553),re=n(556),se=n(131),le=n(92),de=n(60),ue=n(558),je=n(559),be=se.a.Option,he=N.a.Text,fe=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(j.jsx)("div",{className:z.a.Dark,children:Object(j.jsxs)(re.b,{direction:"vertical",align:"center",style:{width:"100%",paddingTop:20},size:"large",children:[Object(j.jsx)("div",{style:{width:200,height:200,backgroundColor:"rgb(30,30,30)",borderRadius:10,display:"flex",justifyContent:"center",alignItems:"center"},children:n?Object(j.jsx)(de.a,{style:{fontSize:100}}):Object(j.jsx)(ue.a,{style:{fontSize:100}})}),Object(j.jsxs)(le.a,{onClick:function(e){a(!0),setTimeout((function(){ne.a.error({message:Object(j.jsx)(he,{type:"danger",children:"Camera error"}),description:"Some unextendable internal error. Try to reload page!",placement:"bottomLeft"}),a(!1)}),5*Math.random()*1e3)},disabled:n,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:["Start WebCam"," ",n?Object(j.jsx)(je.a,{spin:!0,style:{display:"flex",justifyContent:"center",alignItems:"center"}}):""]}),Object(j.jsxs)(re.b,{direction:"vertical",size:"small",style:{width:200},children:[Object(j.jsx)(he,{children:"Cam settings:"}),Object(j.jsxs)(se.a,{defaultValue:"cam1",style:{width:"100%"},children:[Object(j.jsx)(be,{value:"cam1",children:"Lenovo EasyCamera"}),Object(j.jsx)(be,{value:"cam2",children:"Integrated Web camera"})]})]})]})})},me=n(560),pe=n(561),Oe=n(75),xe=n(546),ge=n(550),ve=n(551),_e=n(557),ye=N.a.Paragraph,Ce=N.a.Text,Se="http://livecoding/",we=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),i=Object(r.a)(o,2),s=i[0],d=i[1],u=Object(c.useState)("nf62hd8xbsgj"),b=Object(r.a)(u,2),h=b[0],f=b[1],p=Object(c.useState)(!1),O=Object(r.a)(p,2),x=O[0],g=O[1],v=Object(c.useState)([]),_=Object(r.a)(v,2),y=_[0],S=_[1],w=Object(c.useState)([]),N=Object(r.a)(w,2),k=N[0],T=N[1],I=Object(c.useState)(!0),L=Object(r.a)(I,2),M=L[0],P=L[1],W=Object(c.useState)(!0),F=Object(r.a)(W,2),A=F[0],D=F[1],E=Object(c.useState)(!0),R=Object(r.a)(E,2),B=R[0],U=R[1],H=Object(c.useState)(!0),V=Object(r.a)(H,2),K=V[0],J=V[1],q=Object(c.useState)(!1),G=Object(r.a)(q,2),Y=(G[0],G[1]),Q=Object(c.useState)(!0),Z=Object(r.a)(Q,2),X=Z[0],$=Z[1],ee=Object(c.useState)(!1),ce=Object(r.a)(ee,2),ae=ce[0],oe=ce[1],se=Object(c.useState)(!1),ue=Object(r.a)(se,2),je=ue[0],be=ue[1],he=Object(c.useState)(!1),fe=Object(r.a)(he,2),we=fe[0],Ne=(fe[1],Object(c.useState)("")),ke=Object(r.a)(Ne,2),Te=ke[0],Ie=ke[1];function Le(){te.a.get($t+m.url+"/projectviewers").then((function(e){S(e.data)})).catch((function(e){return ne.a.error({message:Object(j.jsx)(Ce,{type:"danger",children:"Project viewer fetch error"}),description:"Some error on server. Try to reload page!\n"+e.message,placement:"bottomLeft"})})).finally((function(){return J(!1)}))}function Me(){te.a.get($t+m.url+"/projectwhitelist").then((function(e){e.data?(console.log(e.data),g(!0),T(e.data)):g(!1)})).catch((function(e){return ne.a.error({message:Object(j.jsx)(Ce,{type:"danger",children:"Project white list fetch error"}),description:"Some error on server. Try to reload page!\n"+e.message,placement:"bottomLeft"})})).finally((function(){return $(!1)}))}Object(c.useEffect)((function(){te.a.get($t+m.url+"/projectname").then((function(e){a(e.data)})).catch((function(e){return ne.a.error({message:Object(j.jsx)(Ce,{type:"danger",children:"Project name fetch error"}),description:"Some error on server. Try to reload page!\n"+e.message,placement:"bottomLeft"})})).finally((function(){return P(!1)})),te.a.get($t+m.url+"/projecttype").then((function(e){d(e.data)})).catch((function(e){return ne.a.error({message:Object(j.jsx)(Ce,{type:"danger",children:"Project type fetch error"}),description:"Some error on server. Try to reload page!\n"+e.message,placement:"bottomLeft"})})).finally((function(){return D(!1)})),te.a.get($t+m.url+"/projectlink").then((function(e){f(e.data)})).catch((function(e){return ne.a.error({message:Object(j.jsx)(Ce,{type:"danger",children:"Project link fetch error"}),description:"Some error on server. Try to reload page!\n"+e.message,placement:"bottomLeft"})})).finally((function(){return U(!1)})),Le(),Me(),Xt.on("viewer_connect",(function(){J(!0),Le()})),Xt.on("whitelist",(function(){$(!0),Me()}))}),[]);var ze=function(){be(!1),oe(!1),We.resetFields()},Pe=xe.a.useForm(),We=Object(r.a)(Pe,1)[0];return Object(j.jsxs)("div",{className:z.a.Dark,style:{width:"100%",height:"100%",overflow:"overlay"},children:[Object(j.jsx)(ge.a,{title:"Add user to white list",visible:je,onCancel:ze,footer:[Object(j.jsx)(le.a,{onClick:ze,disabled:we,children:"Close"},"back"),Object(j.jsx)(le.a,{className:"AppButton",type:"primary",htmlType:"submit",form:"add_to_white_list",disabled:we,children:"Add"},"start")],children:we?Object(j.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"8em"},children:Object(j.jsx)(de.a,{})}):Object(j.jsx)(xe.a,{onFinish:function(){te.a.post($t+m.url+"/addtowhitelist",{}).then((function(){$(!0),Me(),ne.a.info({message:"User added to white list",placement:"bottomLeft"})})).catch((function(e){ne.a.error({message:Object(j.jsx)(Ce,{type:"danger",children:"Add to white list error"}),description:"Some error on server. Try to reload page!\n"+e.message,placement:"bottomLeft"})})).finally((function(){be(!1),oe(!1)}))},name:"add_to_white_list",form:We,children:Object(j.jsx)(xe.a.Item,{name:"User ID",label:Object(j.jsx)(Ce,{style:{fontSize:"1.2em"},children:"Type user id"}),rules:[{required:!0}],children:Object(j.jsx)(ve.a,{value:Te,onChange:function(e){return Ie(e.target.value)},allowClear:!0})})})}),Object(j.jsxs)(re.b,{direction:"vertical",align:"center",style:{width:"100%",paddingTop:20},size:"large",children:[Object(j.jsxs)(re.b,{direction:"vertical",size:"small",style:{width:200},children:[Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(j.jsx)(Ce,{style:{fontSize:20,marginRight:20},children:"Project name "}),M&&Object(j.jsx)(de.a,{style:{fontSize:20}})]}),Object(j.jsx)(ye,{editable:!M&&{onChange:function(e){P(!0),te.a.post($t+m.url+"/changepojectname",{value:e}).then((function(){return a(e)})).catch((function(e){return ne.a.error({message:Object(j.jsx)(Ce,{type:"danger",children:"Project name change error"}),description:"Some error on server. Try to reload page!\n"+e.message,placement:"bottomLeft"})})).finally((function(){return P(!1)}))}},disabled:M,children:M?Object(j.jsx)(de.a,{}):n})]}),Object(j.jsxs)(re.b,{direction:"vertical",size:"small",style:{width:200},children:[Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(j.jsx)(Ce,{style:{fontSize:20,marginRight:20},children:"Project type "}),A&&Object(j.jsx)(de.a,{style:{fontSize:20}})]}),Object(j.jsx)(Ce,{code:!0,style:{fontSize:17},children:A?Object(j.jsx)(de.a,{}):s})]}),Object(j.jsxs)(re.b,{direction:"vertical",size:"small",style:{width:200},children:[Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(j.jsx)(Ce,{style:{fontSize:20},children:"Link"}),Object(j.jsx)(Ce,{type:"success",style:B?{padding:"1px 10px",border:"1px solid #fff",color:"#fff",borderRadius:4,marginTop:5,cursor:"pointer"}:{padding:"1px 10px",border:"1px solid #0f0",color:"#0f0",borderRadius:4,marginTop:5,cursor:"pointer"},children:B?Object(j.jsx)(de.a,{}):"Online"})]}),Object(j.jsxs)(ye,{children:[Object(j.jsx)(Ce,{style:{fontSize:13},children:Se}),Object(j.jsx)(ye,{strong:!0,copyable:!B&&{text:Se+h},style:{border:"1px solid #fff",borderRadius:5,width:"max-content",padding:"1px 10px",fontSize:18,marginTop:6},children:B?Object(j.jsx)(de.a,{}):h})]})]}),Object(j.jsxs)(re.b,{direction:"vertical",size:"small",style:{width:200},children:[Object(j.jsx)(ie.a,{count:y.length,size:"default",offset:[-15,5],style:{backgroundColor:"rgba(20,20,20,0.6)",borderColor:"rgba(0,0,0,0)"},children:Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(j.jsx)(Ce,{style:{fontSize:20,marginRight:20},children:"Viewers"}),K&&Object(j.jsx)(de.a,{style:{fontSize:20}})]})}),Object(j.jsx)(C.b,{loading:K,dataSource:y,renderItem:function(e){return Object(j.jsxs)(C.b.Item,{children:[Object(j.jsx)(Ce,{children:e.name}),Object(j.jsx)(le.a,{onClick:function(t){!function(e){var t=y.filter((function(t){return t.name===e}))[0];t.isLoading=!0,S(y),te.a.post($t+m.url+"/changemute",{name:e}).then((function(e){t.muted=e.data,S(y.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{isLoading:!1})})))})).catch((function(e){return ne.a.error({message:Object(j.jsx)(Ce,{type:"danger",children:"User mute change error"}),description:"Some error on server. Try to reload page!\n"+e.message,placement:"bottomLeft"})})).finally((function(){return Y(!0)}))}(e.name)},danger:!e.isLoading&&e.muted,children:e.isLoading?Object(j.jsx)(de.a,{}):e.muted?Object(j.jsxs)(j.Fragment,{children:["Unmute ",Object(j.jsx)(me.a,{style:{marginLeft:10}})]}):Object(j.jsxs)(j.Fragment,{children:["Mute",Object(j.jsx)(pe.a,{style:{marginLeft:10}})]})})]})},bordered:!0,size:"small",style:{maxHeight:150,overflow:"overlay"}})]}),Object(j.jsxs)(re.b,{direction:"vertical",size:"small",style:{width:200},children:[Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(j.jsx)(Ce,{style:{fontSize:20,marginRight:20},children:"White list"})," ",X?Object(j.jsx)(de.a,{}):Object(j.jsx)(_e.a,{defaultChecked:x,onChange:function(){return $(!0),void te.a.post($t+m.url+"/changewhitelist").then((function(e){g(e.data)})).catch((function(e){return ne.a.error({message:Object(j.jsx)(Ce,{type:"danger",children:"White list change error"}),description:"Some error on server. Try to reload page!\n"+e.message,placement:"bottomLeft"})})).finally((function(){return $(!1)}))}})]}),x&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(C.b,{loading:X,dataSource:k,renderItem:function(e){return Object(j.jsxs)(C.b.Item,{children:[Object(j.jsx)(Ce,{children:e.name}),Object(j.jsx)(le.a,{onClick:function(t){return T(k.filter((function(t){return e._id!==t._id})))},danger:!0,children:Object(j.jsx)(Oe.a,{})})]})},bordered:!0,size:"small",style:{height:150,overflow:"overlay"}}),Object(j.jsx)(le.a,{style:{width:"100%",marginBottom:20},onClick:function(){oe(!0),be(!0)},children:ae?Object(j.jsx)(de.a,{}):"Add to list"})]})]})]})]})},Ne=n(544),ke=n(555),Te=n(562),Ie=n(210),Le=n.n(Ie),Me=function(e){var t=e.title,n=e.content,c=e.date;return Object(j.jsx)("div",{className:"".concat(Le.a.ChatMessage," ").concat(z.a.Dark),children:Object(j.jsx)(Ne.a,{author:t,avatar:Object(j.jsx)(ke.a,{icon:Object(j.jsx)(Te.a,{})}),content:Object(j.jsx)("p",{children:n}),datetime:Object(j.jsx)("div",{className:Le.a.ChatMessage_Date,children:c})})})},ze=n(137),Pe=n.n(ze),We=n(87),Fe=ve.a.Search,Ae=function(e){var t=e.messages,n=e.setMessageArr,a=(e.setMessageCount,e.sourceMessages),o=Object(c.useState)(""),i=Object(r.a)(o,2),s=i[0],l=i[1];Object(c.useEffect)((function(){We.scroller.scrollTo("scrollPointChat",{duration:0,delay:0,smooth:!0,containerId:"scrollChat"}),Xt.on("chat_message",(function(e){We.scroller.scrollTo("scrollPointChat",{duration:0,delay:0,smooth:!0,containerId:"scrollChat"})}))}),[]);return Object(j.jsxs)("div",{className:"".concat(Pe.a.Chat," ").concat(z.a.Dark),children:[Object(j.jsxs)("div",{className:"".concat(Pe.a.Messages," ").concat(z.a.DarkSecond),id:"scrollChat",children:[function(e){return e.map((function(e,t){return Object(j.jsx)(Me,{content:e.content,title:e.title,date:e.date},t)}))}(t),Object(j.jsx)(We.Element,{name:"scrollPointChat"})]}),Object(j.jsx)("div",{className:Pe.a.Input,children:Object(j.jsx)(Fe,{allowClear:!0,maxLength:100,value:s,onChange:function(e){l(e.target.value)},enterButton:Object(j.jsx)(le.a,{className:Pe.a.InputButton,type:"primary",children:"Send"}),onSearch:function(){if(""!==s){var e={content:s,title:m.username,date:(new Date).toLocaleString()};a.push(e),n(a),We.scroller.scrollTo("scrollPointChat",{duration:500,delay:0,smooth:!0,containerId:"scrollChat"}),Xt.emit("new_chat_message",e),l("")}}})})]})},De=n(545),Ee=n(563),Re=n(179),Be=De.a.Meta,Ue=function(e){var t=e.data,n=e.closeNotice,c=e.openNotice,a=function(){c(t.id)};return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(De.a,{size:"small",actions:"streamer"===Q?[Object(j.jsx)(Ee.a,{onClick:a},"code"),Object(j.jsx)(Re.a,{onClick:function(){n(t.id)}},"close")]:[Object(j.jsx)(Ee.a,{onClick:a},"code")],children:Object(j.jsx)(Be,{avatar:Object(j.jsx)(ke.a,{icon:Object(j.jsx)(Te.a,{})}),title:t.title,description:t.desc})})})},He=n(212),Ve=n.n(He),Ke=function(e){var t=e.setNoticeCount,n=e.setClosedNoticeArr,c=e.setNoticeArr,a=e.openNotice,o=e.sourceNotices,i=e.sourceClosedNotices,r=e.setSourceNotices,s=e.data,l=function(e){var a=o.filter((function(t){return t.id===e}))[0],s=r(o.filter((function(e){return e.id!==(null===a||void 0===a?void 0:a.id)})));i.unshift(a),c(s),t(s.length),n(i),Xt.emit("close_notice",a)};return Object(j.jsx)("div",{className:"".concat(Ve.a.Notice," ").concat(z.a.Dark),children:Object(j.jsx)(C.b,{dataSource:s.reverse(),renderItem:function(e){return Object(j.jsx)("div",{className:Ve.a.Notice_Wrapper,children:Object(j.jsx)(Ue,{data:e,closeNotice:l,openNotice:a})})},size:"small"})})},Je=n(213),qe=n.n(Je),Ge=De.a.Meta,Ye=N.a.Text,Qe=N.a.Paragraph,Ze=function(e){var t=e.data,n=e.openNotice,a=Object(c.useState)(!1),o=Object(r.a)(a,2),i=o[0],s=o[1],l=function(){s(!i)};return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(De.a,{type:"inner",size:"small",title:Object(j.jsx)(Ye,{ellipsis:!0,className:qe.a.ClosedNotice_Text,children:t.title}),extra:i?Object(j.jsx)(le.a,{size:"small",onClick:l,children:"Close"}):Object(j.jsx)(le.a,{size:"small",onClick:l,children:"Open"}),actions:i?[Object(j.jsx)(Ee.a,{onClick:function(){n(t.id)}},"code")]:[],children:i?Object(j.jsx)(Ge,{avatar:Object(j.jsx)(ke.a,{icon:Object(j.jsx)(Te.a,{})}),description:t.desc}):Object(j.jsx)(Qe,{ellipsis:!0,className:qe.a.ClosedNotice_Text,children:t.desc})})})},Xe=n(214),$e=n.n(Xe),et=function(e){var t=e.data,n=e.openNotice;return Object(j.jsx)("div",{className:"".concat($e.a.Notice," ").concat(z.a.Dark),children:Object(j.jsx)(C.b,{dataSource:t.reverse(),renderItem:function(e){return Object(j.jsx)("div",{className:$e.a.Notice_Wrapper,children:Object(j.jsx)(Ze,{data:e,openNotice:n})})},size:"small"})})},tt=n(564),nt=n(565),ct=n(566),at=n(567),ot=n(63),it=n.n(ot),rt=N.a.Text,st=function(e){var t=e.children,n=e.data,c=e.isOpened,a=e.setIsOpened,o=e.contentWidget,i=e.placement;return Object(j.jsx)(y.a,{placement:i,visible:c,destroyTooltipOnHide:!0,content:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"CoolMan",children:Object(j.jsxs)(rt,{type:"secondary",strong:!0,style:{fontSize:"0.8em"},children:["from ",n.author]})}),Object(j.jsx)("div",{style:{padding:"5px 0px",fontSize:"1.2em",maxWidth:400},children:n.desc})]}),title:Object(j.jsxs)(re.b,{style:{width:"100%",justifyContent:"space-between"},children:[n.title,Object(j.jsx)("a",{onClick:function(){a(!1),m.isSrcollEventActive=!1,m.decorations=Y.deltaDecorations(m.decorations,[]),o&&Y.removeContentWidget(o)},children:Object(j.jsx)(Re.a,{})})]}),trigger:"contextMenu",children:t})},lt=n(554),dt=(n(412),n(413),function(e){var t=e.value,n=e.lineStart,c=e.lineCount;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(f.a,{className:"CodeMirror_custom",defaultLanguage:"javascript",defaultValue:t,theme:"vs-dark",value:t,onMount:function(e,t){e.updateOptions({roundedSelection:!0,scrollBeyondLastLine:!1,readOnly:!0,minimap:{enabled:!1},lineNumbers:function(e){return n+e-1+""},padding:{bottom:10,top:10}}),t.editor.defineTheme("vs-dark-custom",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.selectionBackground":"#e6e6e625","editor.inactiveSelectionBackground":"#e6e6e615"}}),t.editor.setTheme("vs-dark-custom")},height:c>12?250:19*(c+1)+20})})}),ut=n(289),jt=n.n(ut),bt=ve.a.TextArea,ht={labelCol:{span:8},wrapperCol:{span:16}},ft={wrapperCol:{offset:0,span:24}},mt=function(e){var t=e.createNotice,n=x(),a=(n.context,n.setContext,Object(c.useState)(!1)),o=Object(r.a)(a,2),i=o[0],s=o[1];Object(c.useEffect)((function(){Xt.on("open_notice_add",(function(){s(m.isNoticeAddWindowOpened)})),s(m.isNoticeAddWindowOpened)}));var d=xe.a.useForm(),u=Object(r.a)(d,1)[0];return Object(j.jsx)(lt.a,{title:"Create notice",width:500,placement:"right",closable:!0,destroyOnClose:!0,onClose:function(){m.isNoticeAddWindowOpened=!1,s(!1),u.resetFields(),Xt.emit("close_notice_add")},visible:i,footer:Object(j.jsxs)("div",{style:{textAlign:"right"},children:[Object(j.jsx)(le.a,{onClick:function(){m.isNoticeAddWindowOpened=!1,s(!1),u.resetFields(),Xt.emit("close_notice_add")},style:{marginRight:8},children:"Cancel"}),Object(j.jsx)(le.a,{htmlType:"button",onClick:function(){u.resetFields()},style:{marginRight:8},children:"Reset"}),Object(j.jsx)(le.a,{className:"AppButton",onClick:function(){},htmlType:"submit",form:"notice_add",type:"primary",children:"Create"})]}),children:Object(j.jsxs)(xe.a,Object(l.a)(Object(l.a)({},ht),{},{form:u,name:"notice_add",onFinish:function(e){s(!1),m.isNoticeAddWindowOpened=!1,t(e)},children:[Object(j.jsx)(xe.a.Item,{name:"Question",label:"Question",rules:[{required:!0}],children:Object(j.jsx)(ve.a,{allowClear:!0})}),Object(j.jsx)(xe.a.Item,{name:"Description",label:"Description",rules:[{required:!0}],children:Object(j.jsx)(bt,{allowClear:!0,showCount:!0,maxLength:300,rows:6})}),Object(j.jsx)(xe.a.Item,{children:Object(j.jsx)(jt.a,{strong:!0,style:{fontSize:"1.2em"},children:"Lines selected:"})}),Object(j.jsx)(xe.a.Item,Object(l.a)(Object(l.a)({},ft),{},{style:{minHeight:300},children:Object(j.jsx)(dt,{value:function(){if(void 0===Y||!i)return"";for(var e="",t=m.noticePos.startLineNumber;t<m.noticePos.endLineNumber+1;t++){var n;e+=null===(n=Y.getModel())||void 0===n?void 0:n.getLineContent(t),t!=m.noticePos.endLineNumber&&(e+="\n")}return e}(),lineStart:m.noticePos.startLineNumber,lineCount:m.noticePos.endLineNumber-m.noticePos.startLineNumber})}))]}))})},pt=n(136),Ot=N.a.Text,xt=[],gt=[],vt=[],_t=[],yt="",Ct=!1,St=0,wt=0,Nt=document.createElement("div"),kt=function(e){e.setToolPanelSize;var t,n=x(),a=(n.context,n.setContext,Object(c.useState)(!1)),o=Object(r.a)(a,2),s=o[0],l=o[1],d=Object(c.useState)(!1),u=Object(r.a)(d,2),b=u[0],h=u[1],f=Object(c.useState)(""),p=Object(r.a)(f,2),O=p[0],g=p[1],v=Object(c.useState)(gt.length),_=Object(r.a)(v,2),y=_[0],C=_[1],S=Object(c.useState)(St),w=Object(r.a)(S,2),N=w[0],k=w[1],T=Object(c.useState)(vt),I=Object(r.a)(T,2),L=I[0],M=I[1],P=Object(c.useState)(xt),W=Object(r.a)(P,2),A=W[0],D=W[1],E=Object(c.useState)(gt),R=Object(r.a)(E,2),B=R[0],U=R[1],H=Object(c.useState)(0),V=Object(r.a)(H,2),K=V[0],J=V[1],q=Object(c.useState)({width:"0px",height:"100%"}),Z=Object(r.a)(q,2),X=Z[0],ee=Z[1],ne=Object(c.useState)([]),ae=Object(r.a)(ne,2),se=ae[0],le=ae[1],de=Object(c.useState)("topLeft"),je=Object(r.a)(de,2),be=je[0],he=je[1],me=Object(c.useState)(_t),pe=Object(r.a)(me,2),Oe=pe[0],xe=pe[1],ge=Object(c.useState)(wt),ve=Object(r.a)(ge,2),_e=ve[0],ye=ve[1];function Ce(e){return gt=e}Object(c.useEffect)((function(){Xt.on("close_notice_add",(function(){})),Xt.on("notice_will_scroll",(function(e){var t=document.getElementsByClassName("CoolMan")[0],n=Nt.offsetTop-e.scrollTop;if(t){var c=t.closest(".ant-popover ");if(!c)return;(null===c||void 0===c?void 0:c.classList.contains("ant-popover-placement-bottomLeft"))?c.style.top=n+17+"px":c.style.top=n-c.offsetHeight-2+"px"}})),te.a.get($t+m.url+"/directory").then((function(e){e.data.sort((function(e,t){return e.isDirectory?-1:t.isDirectory?0:1})),_t=e.data,xe(_t)})).catch((function(e){ce({message:Object(j.jsx)(Ot,{type:"danger",children:"Files fetch error."}),description:"Unexpected error on server! Try to reload page.\n"+e,type:"error"})})),te.a.get($t+m.url+"/chat_messages").then((function(e){vt=e.data,M(vt),k(vt.length),St=vt.length})).catch((function(e){ce({message:Object(j.jsx)(Ot,{type:"danger",children:"Chat messages fetch error."}),description:"Unexpected error on server! Try to reload page.\n"+e,type:"error"})})),te.a.get($t+m.url+"/notices").then((function(e){gt=e.data,U(gt),C(gt.length)})).catch((function(e){ce({message:Object(j.jsx)(Ot,{type:"danger",children:"Notices fetch error."}),description:"Unexpected error on server! Try to reload page.\n"+e,type:"error"})})),te.a.get($t+m.url+"/closednotices").then((function(e){xt=e.data,D(xt)})).catch((function(e){ce({message:Object(j.jsx)(Ot,{type:"danger",children:"Closed notices fetch error."}),description:"Unexpected error on server! Try to reload page.\n"+e,type:"error"})})),Xt.on("chat_message",(function(e){vt.push(e),Ct?"chat"!==yt&&(St++,k(St)):(St++,k(St)),M(vt),ye(++wt)})),Xt.on("editor_data_broadcast",(function(e){_t.forEach((function(t){t.path===e.file&&(t.content=e.value,xe(_t))})),m.fileManagerOpenedFile.path===e.file&&(m.fileManagerOpenedFile.content=e.value,Xt.emit("editor_update",e))})),"streamer"===Q&&Xt.on("editor_update_self",(function(e){console.log("here"),_t.forEach((function(t){t.path===e.file&&(t.content=e.value,xe(_t))}))})),Xt.on("closed_notice",(function(e){gt=gt.filter((function(t){return t.id!==e.id})),xt.unshift(e),U(gt),C(gt.length),D(xt)})),Xt.on("created_notice",(function(e){gt.unshift(e),U(gt),C(gt.length)}))}),[]);var Se="streamer"===Q?[{icon:Object(j.jsx)(F.a,{}),name:"file"},{icon:Object(j.jsx)(ie.a,{className:"".concat(it.a.Badge," ").concat(z.a.HoverText),count:N,overflowCount:100,size:"small",offset:[-5,0],title:"Unread messages",children:Object(j.jsx)(tt.a,{className:it.a.ToolPanel_Icons})}),name:"chat"},{icon:Object(j.jsx)(ue.a,{}),name:"cam"},{icon:Object(j.jsx)(nt.a,{}),name:"settings"},{icon:Object(j.jsx)(ie.a,{className:"".concat(it.a.Badge," ").concat(z.a.HoverText),count:y,overflowCount:9,size:"small",offset:[-5,0],title:"Unread messages",children:Object(j.jsx)(ct.a,{className:it.a.ToolPanel_Icons})}),name:"notice"},{icon:Object(j.jsx)(at.a,{}),name:"closed_notice"}]:[{icon:Object(j.jsx)(F.a,{}),name:"file"},{icon:Object(j.jsx)(ie.a,{className:"".concat(it.a.Badge," ").concat(z.a.HoverText),count:N,overflowCount:100,size:"small",offset:[-5,0],title:"Unread messages",children:Object(j.jsx)(tt.a,{className:it.a.ToolPanel_Icons})}),name:"chat"},{icon:Object(j.jsx)(ie.a,{className:"".concat(it.a.Badge," ").concat(z.a.HoverText),count:y,overflowCount:9,size:"small",offset:[-5,0],title:"Unread messages",children:Object(j.jsx)(ct.a,{className:it.a.ToolPanel_Icons})}),name:"notice"},{icon:Object(j.jsx)(at.a,{}),name:"closed_notice"}];m.placement="topLeft";var Ne=function(e){b&&(h(!1),Y.deltaDecorations(m.decorations,[]),m.isSrcollEventActive=!1);var n=Ie(e);m.fileManagerOpenedFile.path!==n.currentFile&&Xt.emit("notice_open_file",{path:n.currentFile}),Y.revealLineInCenter(Ie(e).position.startLineNumber,0);var c;Y.getScrollTop();n.position.startLineNumber<10?(c=n.position.endLineNumber,m.placement="bottomLeft"):(c=n.position.startLineNumber,m.placement="topLeft"),he(m.placement),t={getId:function(){return"my.content.widget"},getDomNode:function(){return Nt},getPosition:function(){return{position:{lineNumber:c,column:(n.position.endColumn-n.position.startColumn)/2},preference:[G.editor.ContentWidgetPositionPreference.ABOVE,G.editor.ContentWidgetPositionPreference.BELOW]}}},Y.addContentWidget(t),m.decorations=Y.deltaDecorations([],[{range:n.position,options:{isWholeLine:!0,className:"noticeLineSelected",marginClassName:"noticeLineSelectedMargin",glyphMarginClassName:"noticeLineSelectedGlyph",hoverMessage:{value:"".concat(n.title," from ").concat(n.author)}}}]),J(e),h(!0),m.isSrcollEventActive=!0},ke=function(e){g(e),yt=e,l(!0),Ct=!0,ee({width:"250px",height:"100%"}),"chat"===yt&&k(St=0)},Te=function(e,t){s?O!=t?(ke(t),yt=t):(ee({width:"0px",height:"100%"}),l(!1),Ct=!1):(ke(t),yt=t)},Ie=function(e){return[].concat(Object(oe.a)(B),Object(oe.a)(A)).filter((function(t){return t.id===e}))[0]};return Object(j.jsxs)("div",{className:"".concat(it.a.Wrapper),children:[Object(j.jsx)(re.b,{className:"".concat(it.a.ToolPanel_Icons," ").concat(it.a.ToolPanel_Space," ").concat(z.a.DarkSecond),style:{width:50,minWidth:50},direction:"vertical",children:function(e){return e.map((function(e){return Object(j.jsx)("div",{className:"".concat(it.a.Icon," ").concat(z.a.HoverText),onClick:function(t){return Te(t,e.name)},children:e.icon},e.name)}))}(Se)}),Object(j.jsx)(pt.a,{ref:function(e){e},enable:{top:!1,right:!0,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},defaultSize:{width:0,height:"100%"},style:{transition:"width 0.35s ease",overflow:"overlay"},size:X,minWidth:0,maxWidth:250,onResizeStop:function(e,t,n,c){ee({width:parseInt(X.width)+c.width+"px",height:"100%"})},children:function(e){switch(e){case"file":return Object(j.jsx)($,{data:Oe,expanded:se,setExpanded:le});case"chat":return Object(j.jsx)(Ae,{sourceMessages:vt,messages:L,setMessageArr:M,setMessageCount:k},_e);case"notice":return Object(j.jsx)(Ke,{data:B,setSourceNotices:Ce,sourceNotices:gt,sourceClosedNotices:xt,setNoticeCount:C,setClosedNoticeArr:D,setNoticeArr:U,openNotice:Ne});case"closed_notice":return Object(j.jsx)(et,{data:A,openNotice:Ne});case"cam":return Object(j.jsx)(fe,{});case"settings":return Object(j.jsx)(we,{})}}(O)}),b&&Object(j.jsx)(j.Fragment,{children:i.a.createPortal(Object(j.jsx)("div",{style:{position:"absolute",top:13},children:Object(j.jsx)(st,{placement:be,data:Ie(K),isOpened:b,setIsOpened:h,contentWidget:t})}),Nt)}),Object(j.jsx)(mt,{createNotice:function(e){var t=m.username,n=m.noticePos,c={id:B.length+A.length+1,title:e.Question,desc:e.Description,author:t,position:n,currentFile:m.fileManagerOpenedFile.path};gt.unshift(c),U(gt),C(gt.length),Xt.emit("create_notice",c)}})]})},Tt=n(71),It=n.n(Tt),Lt=n(568),Mt=n(569),zt=n(570),Pt=0,Wt=0,Ft=[],At=N.a.Text,Dt=function(){var e=Object(c.useState)(0),t=Object(r.a)(e,2),n=t[0],o=t[1],i=Object(c.useState)(0),s=Object(r.a)(i,2),l=s[0],d=s[1],u=Object(c.useState)(Ft),b=Object(r.a)(u,2),h=b[0],f=b[1],p=Object(c.useState)(!0),O=Object(r.a)(p,2),x=(O[0],O[1],Object(c.useState)("100%")),g=Object(r.a)(x,2),v=g[0],_=g[1],y=Object(c.useState)("overlay"),C=Object(r.a)(y,2),S=C[0],w=C[1],N=Object(c.useState)("80%"),k=Object(r.a)(N,2),T=k[0],I=k[1],L=Object(c.useState)(!1),M=Object(r.a)(L,2),P=M[0],W=M[1],F=a.a.createRef();Object(c.useEffect)((function(){function e(){o(++Pt)}return Xt.on("output_reload",e),window.addEventListener("message",(function(e){if(e.data&&"iframe"===e.data.source){var t;if("error"===e.data.message[0]){var n=e.data.message[1].url.split("/");t=Object(j.jsxs)("div",{className:It.a.ConsoleItem,children:[Object(j.jsx)(At,{type:"danger",code:!0,children:e.data.message[1].error.stack}),Object(j.jsx)(At,{type:"secondary",underline:!0,strong:!0,className:It.a.fileAndLine,children:n[n.length-1]+":"+e.data.message[1].lineNo})]},Ft.length)}else t=Object(j.jsxs)("div",{className:It.a.ConsoleItem,children:[Object(j.jsx)(At,{type:"secondary",code:!0,children:e.data.message.slice(2).map((function(e){return JSON.stringify(e)})).join(" ")}),Object(j.jsx)(At,{type:"secondary",underline:!0,strong:!0,className:It.a.fileAndLine,children:e.data.message[1]})]},Ft.length);Ft.push(t),f(Ft),d(++Wt),We.scroller.scrollTo("scrollPoint",{duration:500,delay:0,smooth:!0,containerId:"scroll"})}})),function(){Xt.off("output_reload",e)}}),[]);var A=function(){P?(_("100%"),I("80%"),w("overlay"),W(!1)):(_("0%"),w("hidden"),I("95%"),W(!0))};return Object(j.jsxs)("div",{style:{width:"100%",height:"100%"},className:z.a.Dark,children:[Object(j.jsx)("iframe",{className:It.a.Iframe,ref:F,src:$t+"static/"+m.url,frameBorder:"0",style:{width:"100%",height:T},id:"iframe"},n),Object(j.jsxs)("div",{className:"".concat(It.a.Console," ").concat(z.a.Dark),style:{height:"20%"},children:[Object(j.jsxs)("div",{className:"".concat(It.a.ConsoleMenu," ").concat(z.a.DarkSecond),children:[Object(j.jsx)(At,{type:"secondary",style:{color:"rgba(190, 190, 190, 0.623)",margin:"0px 5px"},children:"Console"}),Object(j.jsxs)("div",{className:It.a.ConsoleMenuButtons,children:[Object(j.jsx)(Lt.a,{className:It.a.Button,onClick:function(){f(Ft=[])}}),P?Object(j.jsx)(Mt.a,{className:z.a.HoverText,onClick:A}):Object(j.jsx)(zt.a,{className:z.a.HoverText,onClick:A})]})]}),Object(j.jsxs)("div",{className:It.a.ConsoleOutput,id:"scroll",style:{height:v,overflow:S,transition:"hieght .35s ease"},children:[h,Object(j.jsx)(We.Element,{name:"scrollPoint"})]},l)]})]})},Et=n(290),Rt=n.n(Et),Bt={top:!1,right:!0,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},Ut=function(){var e=Object(c.useState)({width:"max-content",height:"100%"}),t=Object(r.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)({width:"100px",height:"100%"}),i=Object(r.a)(o,2),s=i[0],d=i[1],u=Object(c.useState)({width:"400px",height:"100%"}),b=Object(r.a)(u,2),f=b[0],m=b[1];return Object(j.jsxs)("div",{className:Rt.a.WorkSpace,children:[Object(j.jsx)(h,{size:n,children:Object(j.jsx)(kt,{setToolPanelSize:a})}),Object(j.jsx)(pt.a,{style:{backgroundColor:"#1b1b1b",flexGrow:1},size:s,enable:Bt,defaultSize:s,onResizeStop:function(e,t,n,c){d({width:parseInt(s.width)+c.width+"px",height:"100%"})},children:Object(j.jsx)(h,{size:{width:"100%",height:"100%"},children:Object(j.jsx)(ae,{})})}),Object(j.jsx)(pt.a,{style:{backgroundColor:"#1b1b1b"},size:f,enable:Object(l.a)(Object(l.a)({},Bt),{},{left:!0,right:!1}),defaultSize:f,minWidth:"15%",maxWidth:"80%",onResizeStop:function(e,t,n,c){m({width:parseInt(f.width)+c.width+"px",height:"100%"})},children:Object(j.jsx)(h,{size:{width:"100%",height:"100%"},children:Object(j.jsx)(Dt,{})})})]})},Ht=s.a.Content,Vt=function(){return Object(j.jsx)(s.a,{style:{height:"100%"},children:Object(j.jsx)(Ht,{children:Object(j.jsx)(Ut,{})})})},Kt=(n(516),n(517),n(518),n(291)),Jt=n.n(Kt),qt=n(292),Gt=n(296),Yt=n(286),Qt=n(297),Zt=N.a.Text,Xt=new Jt.a,$t="/",en=0;var tn=function(){var e=Object(c.useState)(en),t=Object(r.a)(e,2),n=(t[0],t[1],Object(c.useState)(!0)),a=Object(r.a)(n,2),o=a[0],i=a[1],s=Object(c.useState)(!1),l=Object(r.a)(s,2),d=l[0],u=l[1],b=Object(c.useState)(!1),h=Object(r.a)(b,2),f=h[0],p=(h[1],Object(c.useState)("")),O=Object(r.a)(p,2),x=O[0],v=O[1],_=Object(c.useState)(m),y=Object(r.a)(_,2),C=y[0],S=y[1];Z=Object(c.useRef)(),Object(c.useEffect)((function(){return te.a.get($t+m.url+"/viewtype").then((function(e){X=e.data,console.log(X),X.name?w(X.viewtype,X.name):u(!0)})).catch((function(e){ce({message:Object(j.jsx)(Zt,{type:"danger",children:"Connection error\n"}),description:e.message,type:"error"})})),function(){var e;null===(e=Z.current)||void 0===e||e.disconnect()}}),[]);var w=function(e,t){var n,c,a,o,r,s,l;(Q=e,m.username=t||"user",i(!1),Z.current=Object(qt.io)($t,{reconnection:!0,transports:["websocket"],query:{roomId:m.url}}),Z.current.on("connect",(function(){var e;null===(e=Z.current)||void 0===e||e.emit("viewer_connect",m.username)})),Z.current.on("disconnect",(function(e){var t;console.log("disconnected by",e),null===(t=Z.current)||void 0===t||t.emit("viewer_disconnect",m.username)})),Z.current.on("connect_error",(function(e){ce({message:Object(j.jsx)(Zt,{type:"danger",children:"Socket connection error\n"}),description:e.message,type:"error"})})),null===(n=Z.current)||void 0===n||n.on("chat_message",(function(e){Xt.emit("chat_message",e)})),null===(c=Z.current)||void 0===c||c.on("viewer_connect",(function(e){Gt.b.info("User '".concat(e,"'connected")),Xt.emit("viewer_connect")})),null===(a=Z.current)||void 0===a||a.on("viewer_disconnect",(function(e){Gt.b.warn("User '".concat(e,"' disconnected"))})),null===(o=Z.current)||void 0===o||o.on("created_notice",(function(e){Xt.emit("created_notice",e),ne.a.info({message:"User ".concat(e.author," added new notice!")})})),Xt.on("new_chat_message",(function(e){var t;null===(t=Z.current)||void 0===t||t.emit("new_chat_message",e)})),Xt.on("create_notice",(function(e){var t;null===(t=Z.current)||void 0===t||t.emit("create_notice",e)})),"viewer"===Q)?(null===(r=Z.current)||void 0===r||r.on("editor_data_broadcast",(function(e){Xt.emit("editor_data_broadcast",e)})),null===(s=Z.current)||void 0===s||s.on("output_reloaded",(function(){Xt.emit("output_reload")})),null===(l=Z.current)||void 0===l||l.on("closed_notice",(function(e){Xt.emit("closed_notice",e)}))):(Xt.on("output_reload",(function(){var e;null===(e=Z.current)||void 0===e||e.emit("output_reload")})),Xt.on("close_notice",(function(e){var t;null===(t=Z.current)||void 0===t||t.emit("close_notice",e)})))},N=xe.a.useForm(),k=Object(r.a)(N,1)[0];return Object(Qt.a)((function(){var e;return te.a.post($t+m.url+"/disconnect"),null===(e=Z.current)||void 0===e||e.disconnect(),"You\u2019ll lose your data!"})),Object(j.jsxs)("div",{className:"App ".concat(z.a.Dark),children:[Object(j.jsx)(ge.a,{visible:d,afterClose:function(){return w(X.viewtype,x)},title:"Enter your name",centered:!0,footer:[Object(j.jsx)(le.a,{className:"AppButton",type:"primary",htmlType:"submit",form:"name_edit",disabled:f,children:"Ok"},"start")],children:f?Object(j.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"8em"},children:Object(j.jsx)(de.a,{})}):Object(j.jsx)(xe.a,{form:k,onFinish:function(){i(!0),te.a.post($t+m.url+"/changename",{name:x}).then((function(){})).catch((function(){ne.a.error({message:Object(j.jsx)(Zt,{type:"danger",children:"Set name error"}),description:"Some error on server. You will be redirect to main page after 4 second!",placement:"bottomLeft"}),setTimeout((function(){return window.location.replace($t)}),4e3)})).finally((function(){i(!1),u(!1),k.resetFields()}))},name:"name_edit",children:Object(j.jsx)(xe.a.Item,{name:"Name",label:"Type your name here",rules:[{required:!0}],children:Object(j.jsx)(ve.a,{value:x,onChange:function(e){return v(e.target.value)},allowClear:!0})})})}),o?Object(j.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(j.jsx)(Yt.a,{className:"Spin",size:"large"})}):Object(j.jsx)(g.Provider,{value:{context:C,setContext:S},children:Object(j.jsx)(Vt,{})})]})},nn=n(293);n.n(nn).a.config(),i.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(tn,{})}),document.getElementById("root"))},63:function(e,t,n){e.exports={ToolPanel_Icons:"ToolPanel_ToolPanel_Icons__3vMI8",ToolPanel_Space:"ToolPanel_ToolPanel_Space__21Vbq",Wrapper:"ToolPanel_Wrapper__2VDXt",ToolPanel_OpenedTool:"ToolPanel_ToolPanel_OpenedTool__3B8ZD",Icon:"ToolPanel_Icon__3WgFO"}},71:function(e,t,n){e.exports={ConsoleItem:"OutputWindow_ConsoleItem__2vfJN",Console:"OutputWindow_Console__g3APw",Iframe:"OutputWindow_Iframe__178YI",ConsoleOutput:"OutputWindow_ConsoleOutput__2w6el",ConsoleMenu:"OutputWindow_ConsoleMenu__2hM3U",ConsoleMenuButtons:"OutputWindow_ConsoleMenuButtons__2GWdI",Button:"OutputWindow_Button__11b6a",FileAndLine:"OutputWindow_FileAndLine__Pf3As"}}},[[542,1,2]]]);
//# sourceMappingURL=main.38d624b5.chunk.js.map